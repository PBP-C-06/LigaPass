{% extends 'matches/manage/admin_manage_base.html' %}
{% load static %}
{% block title %}Manajemen Venue{% endblock %}

{% block list_content %}
<div class="bg-white p-6 rounded-xl shadow-lg border border-slate-200">
  <h1 class="text-2xl font-bold text-blue-600 mb-4">Manajemen Venue</h1>
  <a href="{% url 'matches:add_venue' %}" class="bg-green-500 text-white p-2 rounded my-4 inline-block hover:bg-green-600 transition-colors">
    + Tambah Venue Baru
  </a>

  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mt-4">
    {% for venue in venues %}
    <div class="bg-slate-50 p-4 rounded-lg shadow-sm flex flex-col hover:bg-slate-100 transition-colors duration-200 border-l-4 border-blue-500 border border-slate-200">
      <div class="flex items-center justify-between mb-2">
        <div class="flex flex-col">
          <p class="font-semibold text-slate-800 text-lg">{{ venue.name }}</p>
          <p class="text-sm text-slate-500">{{ venue.city|default:"N/A" }}</p>
        </div>
        <div class="flex space-x-2">
          <a href="{% url 'matches:edit_venue' venue.pk %}" class="text-yellow-600 hover:text-yellow-700 text-sm font-semibold p-1 rounded transition">Edit</a>
          <a href="{% url 'matches:delete_venue' venue.pk %}" class="text-red-600 hover:text-red-700 text-sm font-semibold p-1 rounded transition">Hapus</a>
        </div>
      </div>

      <div class="w-full h-32 bg-white border border-slate-200 rounded-md flex items-center justify-center text-slate-400 text-xs italic overflow-hidden">
        
        {% with name_and_city=venue.name|add:" "|add:venue.city %}
        {% with filename=name_and_city|lower|cut:","|cut:"."|slugify|add:".png" %}
        <img src="{% static 'venues/'|add:filename %}" 
             alt="Foto Venue {{ venue.name }}"
             onerror="this.onerror=null;this.src='{% static 'images/thumbnail_placeholder.png' %}';"
             class="w-full h-full object-cover">
        {% endwith %}
        {% endwith %}

        <noscript>
            [Foto Venue Belum Tersedia]
        </noscript>
      </div>
    </div>
    {% empty %}
      <div class="col-span-full bg-slate-50 p-6 rounded-lg text-center border border-slate-200">
        <p class="text-slate-600">Belum ada venue yang terdaftar.</p>
      </div>
    {% endfor %}
  </div>
</div>
{% endblock list_content %}