{% extends 'base.html' %}
{% block title %}Kalender Pertandingan{% endblock %}
{% block content %}
<div class="max-w-4xl mx-auto">
  <h1 class="text-3xl font-bold text-center mb-6 text-slate-800">Kalender Pertandingan</h1>

  <div class="mt-8 flex justify-center space-x-4">
    <button id="testSuccess" class="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition">Test Success</button>
    <button id="testError" class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition">Test Error</button>
    <button id="testInfo" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition">Test Info</button>
  </div>

  <form method="GET" action="{% url 'matches:calendar' %}" class="mb-8 mt-6">
    <div class="flex">
      <input type="text" name="q" placeholder="Cari nama tim..." value="{{ request.GET.q }}"
        class="w-full p-3 rounded-l-lg bg-white text-slate-800 border border-slate-300 focus:ring-2 focus:ring-blue-400 focus:outline-none placeholder-slate-400">
      <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-r-lg transition">
        Cari
      </button>
    </div>
  </form>

  {% if user.is_authenticated and user.role == 'admin' %}
    <div class="text-center mb-4">
      <a href="{% url 'matches:update_from_api' %}" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded transition">
        Update Data dari API
      </a>
    </div>
  {% endif %}

  {% if messages %}
    {% for message in messages %}
      <div class="bg-green-100 border border-green-300 text-green-800 p-3 rounded-lg mb-4 text-center">
        {{ message }}
      </div>
    {% endfor %}
  {% endif %}

  {% if not grouped_matches.Upcoming and not grouped_matches.Ongoing and not grouped_matches.Past %}
    <div class="bg-slate-50 border border-slate-200 p-6 rounded-lg text-center">
      <p class="text-slate-600">Tidak ada pertandingan yang ditemukan.</p>
    </div>
  {% endif %}

  {% if grouped_matches.Upcoming %}
    <h2 class="text-2xl font-semibold border-b-2 border-slate-200 pb-2 mb-4 text-slate-800">Upcoming</h2>
    <div class="space-y-4">
      {% for match in grouped_matches.Upcoming %}
        {% include 'matches/match_card.html' with match=match %}
      {% endfor %}
    </div>
  {% endif %}

  {% if grouped_matches.Ongoing %}
    <h2 class="text-2xl font-semibold border-b-2 border-slate-200 pb-2 mb-4 mt-8 text-slate-800">Ongoing</h2>
    <div class="space-y-4">
      {% for match in grouped_matches.Ongoing %}
        {% include 'matches/match_card.html' with match=match %}
      {% endfor %}
    </div>
  {% endif %}

  {% if grouped_matches.Past %}
    <h2 class="text-2xl font-semibold border-b-2 border-slate-200 pb-2 mb-4 mt-8 text-slate-800">Past</h2>
    <div class="space-y-4">
      {% for match in grouped_matches.Past %}
        {% include 'matches/match_card.html' with match=match %}
      {% endfor %}
    </div>
  {% endif %}
</div>
{% endblock %}
