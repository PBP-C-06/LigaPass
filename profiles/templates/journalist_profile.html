<!-- Menampilkan journalist profile -->

{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="bg-white p-8 md:p-10 rounded-xl shadow-xl max-w-6xl mx-auto">

    <!-- Journalist Profile Section -->
    <div class="mb-10 border-b pb-6">
        <div class="flex items-center gap-6">
            <div class="relative">
                <img id="profile-picture" src="" alt="Foto Profil Journalist"
                    class="h-24 w-24 rounded-full object-cover border-4 border-white shadow-md">
            </div>
            <div>
                <h2 class="text-3xl font-semibold text-gray-800 mb-1">
                    <span id="username"></span>
                </h2>
            </div>
        </div>
    </div>
</div>
{% endblock content %}

{% block scripts %}
{{ block.super }}
<script>
document.addEventListener("DOMContentLoaded", async function () {
    const STATIC_URL = "{% static '' %}";
    const DUMMY_USER_IMAGE = STATIC_URL + 'images/default-profile-picture.png';

    const profilePicture = document.getElementById("profile-picture");
    const usernameEl = document.getElementById("username");

    // --- Fetch Journalist Profile ---
    try {
        const response = await fetch(`/profiles/json/adminjournalist/`);
        if (!response.ok) throw new Error("Gagal mengambil data journalist dari server.");
        const data = await response.json();

        usernameEl.textContent = data.username;
        profilePicture.src = data.profile_picture ? STATIC_URL + data.profile_picture : DUMMY_USER_IMAGE;
        profilePicture.alt = "Foto Profil journalist";
    } catch (error) {
        console.error("Terjadi kesalahan saat memuat profil journalist:", error);
        showToast("Terjadi kesalahan saat memuat profil journalist.", "error");
    }
});
</script>
{% endblock scripts %}

